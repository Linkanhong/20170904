<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"> 
  <meta name="keywords" content="店装帮">
  <meta name="description" content="店装帮，让店装更便捷" />
  <title>任务信息</title>
  <link rel="shortcut icon" href="favicon.ico"/>
  <link rel="stylesheet" type="text/css" href="style.css">    
  <link href="css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="css/Payeng.css">

  <script src="js/jquery-2.1.1.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <link href="datecss/bootstrap-datetimepicker.min.css" rel="stylesheet" media="screen">
  <script type="text/javascript" src="datejs/bootstrap-datetimepicker.js" charset="UTF-8"></script>
  <script type="text/javascript" src="datejs/bootstrap-datetimepicker.zh-CN.js" charset="UTF-8"></script>

</head>
<body>
  <header class="t-header">     
    <div class="container-fluid p-nopadding t-top p-container">
        <span><a href="index.html"><img src="img/logo.png" alt="店装帮"></a><em>让店装更便捷</em></span>
        <ul class="list-inline pull-right p-nopadding t-ul">
            <li id="index_head"><a href="login.html">登录</a><a href="register.html">免费注册</a></li>
            <li class="p-paddingLeft8" id="showsysout"></li>
        </ul>            
    </div>   
  </header><!--end headr -->

  <nav class="navbar navbar-default t-nomargin t-navbar">
    <div class="container-fluid p-container p-nopadding ">
      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
      </div>
      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse p-nopadding" id="bs-example-navbar-collapse-1">
        <ul class="nav navbar-nav t-width100">
          <li class="dropdown t-background t-li">
            <a href="#" class="dropdown-toggle t-fontcolor6 c-dropdown" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><img src="img/nav-icon.png" alt="" class="t-por3 c-navicon">全部导航<span class="caret"></span></a>
            <ul class="dropdown-menu">
              <li><a href="index.html">首页<span class="icon-navshouye pull-right p-iconBefore"></span></a></li>
              <li role="separator" class="divider"></li>
              <li><a href="seller-list.html">找需求<span class="icon-navchuangkezhongxin pull-right p-iconBefore"></span></a></li>
              <li role="separator" class="divider"></li>
              <li><a href="stuff.html">找材料<span class="icon-navzhaocailiao pull-right p-iconBefore"></span></a></li>
              <li role="separator" class="divider"></li>
              <li><a href="maker.html">创客中心<span class="icon-navchuangkezhongxin pull-right p-iconBefore"></span></a></li>
            </ul>
          </li>
          <li class="p-active"><a href="index.html">首页</a></li>
          <li><a href="seller-list.html">找需求<img src="img/hothover.png" alt="" class="t-paddingLeft c-img"></a></li>
          <li><a href="stuff.html">找材料</a></li>
          <li><a href="maker.html">创客中心认证</a></li>
          <li class="pull-right"></li>
        </ul>
      </div><!-- /.navbar-collapse -->
    </div><!-- /.container-fluid -->
  </nav><!--end nav -->  

<div class="container-fluid col-md-8 col-md-offset-2 text-center">
	<ul class="col-xs-12 p-nowrap p-fons1">
		<li class="col-xs-2 p-overFlow p-nocolor"><span class="glyphicon glyphicon-list-alt p-fontcolor2"></span><br> 填写任务信息</li>
		<li class="col-xs-2 p-overFlow"><span class="glyphicon glyphicon-search"></span><br> 任务审核、验证</li>
		<li class="col-xs-2 p-overFlow"><span class="glyphicon glyphicon-user"></span><br> 匹配供应方</li>
		<li class="col-xs-2 p-overFlow"><span class="glyphicon glyphicon-cog"></span><br> 供应方工作</li>
		<li class="col-xs-2 p-overFlow"><span class="glyphicon glyphicon-ok"></span><br> 验收并付款</li>
		<li class="col-xs-2 p-overFlow"><span class="glyphicon glyphicon-th-large"></span><br> 售后</li>
		<li class="col-xs-10 col-xs-offset-1 p-hr2"></li>
	</ul>
	<div class="clearfix"></div>
</div><!-- /menu -->
<div class="clearfix"></div>
<hr class="p-border1 col-md-8 col-md-offset-2 p2-marb2 p-nop">
<hr class="p-border1 col-md-8 col-md-offset-2 p-nop p2-hr2">

<div class="container-fluid col-md-10 col-md-offset-1">
	<form  class="col-md-6 col-md-offset-3" id="orderFrom">
		  <div class="form-group p-input col-md-12 p2-marginBottom3">
		    <label class="col-sm-3 control-label2"><span class="p-red p-star">*</span>任务标题</label>
		    <div class="col-sm-9">
		      <input type="text" class="form-control" name="order_name" id="order_name" placeholder="十个海信的展柜" maxlength="20" > 
		      <p class="help-block p-inlineheight2 p-padl2 p2-nomargin p2-inlineheight2">标题请勿超过20个汉字</p>
		    </div>
		  </div>
		  <div class="form-group p-input col-md-12 p2-marginBottom4">
		    <label class="col-sm-3 control-label"><span class="p-red p-star">*</span>具体详情</label>
		    <div class="col-sm-9">
		      <textarea name="order_remark" id="order_remark" rows="10" class="col-xs-12 p2-textarea2 p2-marginBottom8" placeholder="尺寸等明细（15-500字以内）" maxlength="1000" minlength="30"></textarea>
		    </div>
		  </div>
		  <div class="form-group p-input col-md-12 p2-marginBottom4">
		    <label class="col-sm-3 control-label"><span class="p-red p-star">*</span>任务类型</label>
		    <div class="col-sm-9 p2-marginBottom8">
		     	<input type="radio" id="" name="order_type" value="taskcode.SIdesign" checked />&nbsp;SI设计&nbsp;&nbsp;&nbsp;&nbsp;
		     	<input type="radio" id="" name="order_type" value="taskcode.proofing" />&nbsp;打样&nbsp;&nbsp;&nbsp;&nbsp;
		     	<input type="radio" id="" name="order_type" value="taskcode.process" />&nbsp;加工&nbsp;&nbsp;&nbsp;&nbsp;
		     	<input type="radio" id="" name="order_type" value="taskcode.measure" />&nbsp;测量&nbsp;&nbsp;&nbsp;&nbsp;
		     	<input type="radio" id="" name="order_type" value="taskcode.setup" />&nbsp;道具安装&nbsp;&nbsp;&nbsp;&nbsp;
		     	<input type="radio" id="" name="order_type" value="taskcode.aftermarket" />&nbsp;售后&nbsp;&nbsp;&nbsp;&nbsp;
		     	<input type="radio" id="" name="order_type" value="taskcode.shopoutfit" />&nbsp;店装&nbsp;&nbsp;&nbsp;&nbsp;
		    </div>
		  </div>
		  <div class="clearfix"></div>
		  <div class="form-group col-md-12 p2-marginBottom5">
		    <label class="col-sm-3 control-label2"><span class="p-red p-star">*</span>添加附件</label>
		    <div class="col-sm-6 p-input">
				<a href="javascript:;" class="p-file p-btnwidth p-style p-pdfFile text-center col-sm-12">
			    	<input type="file" name="pdfFile" id="pdfFile" accept="application/pdf">点击上传PDF文件
			    </a>		        
		    </div>
		    <div class="col-sm-3">
		    	<input type="button" class="btn btn-primary p2-marginLeft5" value="上传" onclick="uploadpdfFile();" />
		    </div>
		    <input type="hidden" id="attid" name="attid" value=""/>
		  </div>
		  <div class="clearfix"></div>
		  <div class="form-group p-input col-md-12 p2-marginBottom5 p2-marginTop5">
		      <label class="col-sm-3 control-label2"><span class="p-red p-star">*</span>任务金额</label>
		      <div class="col-sm-6 p2-marginBottom8">
		  	    <input type="text" class="form-control" name="order_money" id="order_money" placeholder="多少" min="0" onkeyup="if(this.value.length==1){this.value  =this.value.replace(/[^0-9]/g,'')}else{this.value=this.value.replace(/\D/g,'')}" onafterpaste="if(  this.value.length==1){this.value=this.value.replace(/[^0-9]/g,'')}else{this.value=this.value.replace(/\D/g,'')}">
		  	    <span class="form-control-feedback p2-right" >元</span>
		      </div>
	  	  </div>
		  <div class="clearfix"></div>
		  <div class="form-group p-input col-md-12 p2-marginBottom5">
		    <label class="col-sm-3 control-label2"><span class="p-red p-star">*</span>任务期限</label>
		    <div class="col-sm-9 p2-marginBottom8">
			    <div class="col-sm-5 p2-padding6">
			      <input type="text" class="form-control form_date" name="begin_date" id="begin_date" placeholder="请选择" readonly="readonly">
				    <script type="text/javascript">
			  			  $('.form_date').datetimepicker({
			  		            language: 'zh-CN',
			  		            format: 'yyyy-mm-dd',
			  		            weekStart: 1,
			  		            todayBtn: 1,
			  		            autoclose: 1,
			  		            todayHighlight: 1,
			  		            startView: 2,
			  		            minView: 2,
			  		          	initialDate: new Date(),
			  		            forceParse: 0
			  		        });
		           </script>
			    </div>
			    <div class="col-sm-2 control-label2 text-center">至</div>
			    <div class="col-sm-5 p2-padding7">
			      <input type="text" class="form-control form_date" name="end_date" id="end_date" placeholder="请选择" readonly="readonly">
				   <script type="text/javascript">		            
			  			  $('.form_date').datetimepicker({
			  		            language: 'zh-CN',
			  		            format: 'yyyy-mm-dd',
			  		            weekStart: 1,
			  		            todayBtn: 1,
			  		            autoclose: 1,
			  		            todayHighlight: 1,
			  		            startView: 2,
			  		            minView: 2,
			  		          	initialDate: new Date(),
			  		            forceParse: 0
			  		        });
		           </script>
			    </div>
		    </div>
		  </div>
		  <div class="clearfix"></div>
		  <div class="form-group col-md-12">
		    <label class="col-sm-3 control-label2"><span class="p-red p-star">*</span>任务地点</label>
		    <div class="col-sm-9 p2-marginBottom8">
			    <div class="col-sm-5 p2-padding6">
			      <select id="area" name="area"  class="p-option form-control" onchange="selectCity();">
			      	<option value="">-请选择-</option>
			      </select>
			    </div>
			    <div class="col-sm-2 control-label2 text-center"></div>
			    <div class="col-sm-5 p2-padding7">
			      <select id="city" name="city" class="p-option form-control">
			      	<option value="">-请选择-</option>
			      </select>
			    </div>
		    </div>
		  </div>
		  <div class="clearfix"></div>
		  <div class="form-group p-input col-md-12 p2-marginBottom5">
		    <label class="col-sm-3 control-label"></label>
		    <div class="col-sm-9 p2-marginBottom8">
		      	<input type="text" class="form-control" name="address" id="address" placeholder="详细地址" maxlength="200">
		    </div>
		  </div>
		  <div class="clearfix"></div>
		  <div class="form-group col-md-12 p2-marginBottom5">
		    <label class="col-sm-3 control-label2"><span class="p-red p-star">*</span>手机号码</label>
		    <div class="col-sm-6 p2-marginBottom8 p-input">
			    <input type="text" class="form-control" id="link_phone" name="link_phone" placeholder="手机号码" maxlength="11" onkeyup="if(this.value.length==1){this.value=this.value.replace(/[^0-9]/g,'')}else{this.value=this.value.replace(/\D/g,'')}" onafterpaste="if(this.value.length==1){this.value=this.value.replace(/[^0-9]/g,'')}else{this.value=this.value.replace(/\D/g,'')}" />
		    </div>
		    <div class="col-sm-3">
		    	<p class="p-paddingTop1"><img src="img/icon-replace.png" alt=""><input type="button" class="p-primary2 p2-marginLeft2 p2-change" value="更换"></input></p>
		    </div>
		  </div>
		  <div class="clearfix"></div>
		  <!-- 手机验证码		   -->
		  <div class="form-group col-md-12 p2-marginB p2-changePhone p2-marginBottom6">
		  	<div id="">
		    	<label for="inputPassword3" class="col-sm-3 control-label"></label>
		    </div>
		    <div class="col-sm-6">
		      <input type="tel" class="form-control p-input2" id="smsCode" name="smsCode" placeholder="验证码" maxlength="6"
			    onkeyup="if(this.value.length==1){this.value=this.value.replace(/[^0-9]/g,'')}else{this.value=this.value.replace(/\D/g,'')}" onafterpaste="if(this.value.length==1){this.value=this.value.replace(/[^0-9]/g,'')}else{this.value=this.value.replace(/\D/g,'')}" />
			    <a href="javascript:void(0)" onclick="phoneSMS();" class="send p-send form-control-feedback p-form-feedback p-poaR">获取验证码</a>	
			    <sub class="p-danger p2-sub2">验证码</sub>	      
		    </div>
		    <div class="col-sm-3">
		      <p class="p-paddingTop1"><input type="button" class="p-primary2 p2-marginLeft3" value="确定" onclick="savephone();" ></input></p>
		    </div>			    	    
		  </div>
		  <div class="clearfix"></div>
		  <div class="form-group col-md-12 p2-marginBottom5">
		    <label class="col-sm-3 control-label2"><span class="p-red p-star">*</span>邮箱</label>
		    <div class="col-sm-6 p-input">
			    <input type="email" class="form-control email"  placeholder="请输入邮箱地址" id="link_mail" name="link_mail">
			    <sub class="p-red p-sub">邮箱格式不对</sub>
		    </div>
		    <div class="col-sm-3">
				<p class="p-paddingTop1"><img src="img/icon-replace.png" alt=""><input type="button" class="p-primary2 p2-marginLeft2 p2-change2" value="更换"></input></p>		    
			</div>
		  </div>
		  <div class="clearfix"></div>
		  <!-- 邮箱验证码 -->
		  <div class="form-group p2-marginB col-md-12 p2-changeEmail p2-marginBottom5">
		  	<div id="">
		    	<label for="inputPassword3" class="col-sm-3 control-label"></label>
		    </div>
		    <div class="col-sm-6 p-input">
		      <input type="tel" class="form-control" id="mailCode" name="mailCode" placeholder="验证码" maxlength="6"
			    onkeyup="if(this.value.length==1){this.value=this.value.replace(/[^0-9]/g,'')}else{this.value=this.value.replace(/\D/g,'')}" onafterpaste="if(this.value.length==1){this.value=this.value.replace(/[^0-9]/g,'')}else{this.value=this.value.replace(/\D/g,'')}" />
			    <a href="javascript:void(0)" onclick="emailSMS();" class="send p-send form-control-feedback p-form-feedback p-poaR">获取验证码</a>	
			    <sub class="p-danger p2-sub2">验证码</sub>	      
		    </div>
		    <div class="col-sm-3">
		      <p class="p-paddingTop1"><input type="button" class="p-primary2 p2-marginLeft3" value="确定" onclick="savemail();" ></input></p>
		    </div>			    	    
		  </div>
		  </form>
		</div>
	
	<div class="clearfix"></div>

	<div class="container-fluid col-md-10 col-md-offset-1 p-marb3 p2-marginTop6">	
		<div class="form-horizontal col-md-8 col-md-offset-2">
		  <div class="form-group has-feedback">
		    <label class="control-label col-sm-4 sr-only"></label>
			<div class="col-sm-6 text-left">
			  <a class="p-file btn btn2 btn-primary p-submit">提交内容</a>
			</div>	    
		  </div>
		</div>
	</div>
<div class="clearfix"></div><!-- /end -->

<div class="container-fluid footer" id="footer1">
</div><!-- /footer -->


<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="js/Payeng.js"></script>
<script>
var bdate = new Date();
bdate.setDate(bdate.getDate() + 3);
$('#begin_date').datetimepicker('update', bdate);

$.getJSON("/DZBang_entrance/userinfo/isHaveMail.do", function(data){
	  if("" != data){
		if(data.result == "success"){
			if(data.email == "" || data.email == null){
			}else{
				$("#showmail").html(data.email);
				$("#link_mail").val(data.email);
				
			}
		}
		if(data.result == "failed"){
			window.wxc.xcConfirm("查询出错",window.wxc.xcConfirm.typeEnum.error);
		}
		if(data.result == "nologin"){
			window.wxc.xcConfirm("你好，你还未登录，请先登录",window.wxc.xcConfirm.typeEnum.error,
					{onClose: function(){
						window.location.href= "login.html?flag="+Math.random();
					}},
					{onOk: function(){
						window.location.href= "login.html?flag="+Math.random();
					}});
		}
	  }
});
</script>
<script>
$.getJSON("/DZBang_entrance/userinfo/isHavePhone.do", function(data){
	  if("" != data){
		if(data.result == "success"){
			if(data.phone == "" || data.phone == null){
			}else{
				$("#link_phone").val(data.phone);
			}
		}
		if(data.result == "failed"){
			window.wxc.xcConfirm("绑定手机查询出错",window.wxc.xcConfirm.typeEnum.error);
		}
		if(data.result == "nologin"){
			window.wxc.xcConfirm("你好，你还未登录，请先登录",window.wxc.xcConfirm.typeEnum.error,
					{onClose: function(){
						window.location.href= "login.html?flag="+Math.random();
					}},
					{onOk: function(){
						window.location.href= "login.html?flag="+Math.random();
					}});
		}
	  }
});
</script>
<script>
	$.getJSON("/DZBang_entrance/happuser/getloginUser.do", function(data){
		  if("" != data.nickname && null != data.nickname){
			  $("#index_head").html('<a href="user-information.html" class="p-borderColor">'+data.nickname+'</a><a href="user-notice.html"><span class="p-fontcolor20">消息</span></a>');
		      $("#showsysout").html("<a onclick='sysloginout();' >退出</ a>");
			if(data.status == "1"){
				var orderno = GetQueryString("orderno");
				if(orderno != null && orderno != ""){
					$.ajax({
						url: '/DZBang_entrance/orderinfo/getuserinfoOrderbyorderno.do',
						type: 'post',
						data: {order_no:orderno},
						dataType: 'json',
						cache: false,
						'success': function(data){
							$("#order_no").val(data.order_no);
							$("#order_name").val(data.order_name);
							$("#order_remark").val(data.order_remark);
							$("#address").val(data.address);
							$("#order_money").val(data.order_money);
							$("#begin_date").val(data.begin_date_str);
							$("#end_date").val(data.end_date_str);
							
							$("#link_phone").val(data.link_phone);
							$("#link_mail").val(data.link_mail);
							
						},
						'error':function(data){
							window.wxc.xcConfirm("你好，订单查询失败",window.wxc.xcConfirm.typeEnum.error);
						},
	
					});
					
				}
			}
			if(data.status == "2"){
				window.wxc.xcConfirm("你好，你属于服务方，请转至找需求页面",window.wxc.xcConfirm.typeEnum.error,
						{onClose: function(){
							window.location.href= "seller-list.html?flag="+Math.random();
						}},
						{onOk: function(){
							window.location.href= "seller-list.html?flag="+Math.random();
						}});
				
			}
			if(data.status == ""){
				showChooseStatue();
			}
			
			
		  }else{
			window.wxc.xcConfirm("你好，你还未登录，请先登录",window.wxc.xcConfirm.typeEnum.error,
					{onClose: function(){
						window.location.href= "login.html?flag="+Math.random();
					}},
					{onOk: function(){
						window.location.href= "login.html?flag="+Math.random();
					}});
		};
	});
	

	$.ajax({
		url: '/DZBang_entrance/orderinfo/selectAreaList.do',
		type: 'post',
    	data: {parent_code:0},
    	dataType: 'json',
		cache: false,
		'success': function(data){
			var str = "";
			str = str + "<option value=''>-请选择-</option>";
			  $.each(data, function(i,item){
			  		str = str + "<option value='"+item.code+"'>"+item.name+"</option>";
			  	  });
					
			  $("#area").html(str);
		},
		'error':function(data){
			
		}
	});
	
</script>
<script>
$.fn.serializeObject = function()  
{  
   var o = {};  
   var a = this.serializeArray();  
   $.each(a, function() {  
       if (o[this.name]) {  
           if (!o[this.name].push) {  
               o[this.name] = [o[this.name]];  
           }  
           o[this.name].push(this.value || '');  
       } else {  
           o[this.name] = this.value || '';  
       }  
   });  
   return o;  
};


function GetQueryString(name)
{
     var reg = new RegExp("(^|&)"+ name +"=([^&]*)(&|$)");
     var r = window.location.search.substr(1).match(reg);
     if(r!=null)return  unescape(r[2]); return null;
}

function saveOrder(){
    var orderFrom = $('#orderFrom').serializeObject();
    var data = orderFrom;
    
    $.ajax({
		url: '/DZBang_entrance/orderinfo/saveUserinfoOrder.do',
		type: 'post',
    	data: data,
    	dataType: 'json',
		cache: false,
		'success': function(data){
			switch(data.result){
				case "success":
					 window.wxc.xcConfirm("你好，任务已提交成功",window.wxc.xcConfirm.typeEnum.success,
							{onClose: function(){
								window.location.href= "supplier-confirm.html?orderno=" + data.order_no + "&flag="+Math.random();
							}},
							{onOk: function(){
								window.location.href= "supplier-confirm.html?orderno=" + data.order_no + "&flag="+Math.random();
							}});
					  break;
				case "nothavesmscode":
					window.wxc.xcConfirm("你好，请触发短信验证码",window.wxc.xcConfirm.typeEnum.error);
				  	break;
				case "smscodeerror":
					window.wxc.xcConfirm("你好，短信验证码错误",window.wxc.xcConfirm.typeEnum.error);
				  	break;
				case "nologin":
					window.wxc.xcConfirm("你好，请先登录系统",window.wxc.xcConfirm.typeEnum.error); 
				  	break;
				case "nocredit":
					window.wxc.xcConfirm("你好，你不是需求方",window.wxc.xcConfirm.typeEnum.error); 
				  	break;
				default:
					window.wxc.xcConfirm("你好，缺少参数，任务提交失败",window.wxc.xcConfirm.typeEnum.error);
					break;
			}
			
		},
		'error':function(data){
			window.wxc.xcConfirm("你好，任务提交失败",window.wxc.xcConfirm.typeEnum.error);
		}
	});
}

function uploadpdfFile(){
	var formData = new FormData();
    formData.append("pdfFile", document.getElementById("pdfFile").files[0]);   
    $.ajax({
        url: "/DZBang_entrance/orderinfo/uploadPdfFile.do",
        type: "POST",
        data: formData,
        /**
        *必须false才会自动加上正确的Content-Type
        */
        contentType: false,
        /**
        * 必须false才会避开jQuery对 formdata 的默认处理
        * XMLHttpRequest会对 formdata 进行正确的处理
        */
        processData: false,
        success: function (data) {
        	console.log(data);
            if (data.result == "success") {
            	$('#attid').val(data.attid);
                window.wxc.xcConfirm("文件上传成功",window.wxc.xcConfirm.typeEnum.success);
            }
            if (data.result == "error") {
            	window.wxc.xcConfirm("文件上传失败",window.wxc.xcConfirm.typeEnum.error);
            }
            if (data.result == "notpdf") {
            	window.wxc.xcConfirm("上传文件不是pdf文件",window.wxc.xcConfirm.typeEnum.error);
            }
            if (data.result == "tobig") {
            	window.wxc.xcConfirm("上传文件太大了",window.wxc.xcConfirm.typeEnum.error);
            }
            if (data.result == "isnull") {
            	window.wxc.xcConfirm("上传文件不能为空",window.wxc.xcConfirm.typeEnum.error);
            }
            if (data.result == "nologin") {
            	window.wxc.xcConfirm("请先登录系统才能上传文件",window.wxc.xcConfirm.typeEnum.error);
            }
        },
        error: function () {
            window.wxc.xcConfirm("上传失败",window.wxc.xcConfirm.typeEnum.error);
        }
    });
}

function selectCity(){
	var code = $("#area").val();
	if(code != ""){
		$.ajax({
			url: '/DZBang_entrance/orderinfo/selectAreaList.do',
			type: 'post',
	    	data: {parent_code:code},
	    	dataType: 'json',
			cache: false,
			'success': function(data){
				var str = "";
				str = str + "<option value=''>-请选择-</option>";
				  $.each(data, function(i,item){
				  		str = str + "<option value='"+item.code+"'>"+item.name+"</option>";
				  	  });
						
				  $("#city").html(str);
			},
			'error':function(data){
				
			}
		});	
	}
}

//短信验证码
function orderSMS(){
	var phone = $("#link_phone").val();
	if(phone == ''){
		window.wxc.xcConfirm("手机号码不能为空",window.wxc.xcConfirm.typeEnum.error);
		return;
	}else{
		$.ajax({
			url: '/DZBang_entrance/smsCode/orderSMSCode.do',
			type: 'post',
	    	data: {phone:phone,tm:new Date().getTime()},
	    	dataType: 'json',
			cache: false,
			'success': function(data){
				if(data.result == "success"){
					window.wxc.xcConfirm("短信发送成功",window.wxc.xcConfirm.typeEnum.success);
				}else if(data.result == "error"){
					window.wxc.xcConfirm("短信发送失败",window.wxc.xcConfirm.typeEnum.error);
				}else{
					window.wxc.xcConfirm("短信发送异常",window.wxc.xcConfirm.typeEnum.error);
				}
			},
			'error':function(data){
				window.wxc.xcConfirm("短信发送失效",window.wxc.xcConfirm.typeEnum.error);
			}
		});
	}
}

function Palert(){
		$(".p-submit").click(function(event) {
			var index =  $(".p-input").index();
			if ($(".p-input:eq(0) input").val() == '') {
				 window.wxc.xcConfirm('请输入标题',window.wxc.xcConfirm.typeEnum.confirm);
			}else if( $(".p-input:eq(1) textarea").val() == ''){
				window.wxc.xcConfirm('请输入您的具体要求',window.wxc.xcConfirm.typeEnum.confirm);
			}else if( $(".p-input:eq(2) input").is(':radio') == false){
				window.wxc.xcConfirm('请选择至少一项任务类型',window.wxc.xcConfirm.typeEnum.confirm);
			}else if( $(".p-input:eq(3) input").val() == ''){
				window.wxc.xcConfirm('请上传附件',window.wxc.xcConfirm.typeEnum.confirm);
			}else if( $(".p-input:eq(4) input").val() == ''){
				window.wxc.xcConfirm('请输入任务金额',window.wxc.xcConfirm.typeEnum.confirm);
			}else if( $(".p-input:eq(5) input:eq(0)").val() == ''){
				window.wxc.xcConfirm('请输入开工日期',window.wxc.xcConfirm.typeEnum.confirm);
			}else if( $(".p-input:eq(5) input:eq(1)").val() == ''){
				window.wxc.xcConfirm('请输入结束日期',window.wxc.xcConfirm.typeEnum.confirm);
			}else if( bwtDate() ){
				window.wxc.xcConfirm('结束日期必须大于开始时间',window.wxc.xcConfirm.typeEnum.error);
			}else if( substractDate(bdate.toLocaleDateString(), $("#begin_date").val() ) ){
				window.wxc.xcConfirm('开工日期请多预留3天以上的审核时间',window.wxc.xcConfirm.typeEnum.error);
			}else if( $(".p-input:eq(6) input").val() == ''){
				window.wxc.xcConfirm('请输入详细地址',window.wxc.xcConfirm.typeEnum.confirm);
			}else if( $(".p-input:eq(7) input").val() == '' || $(".p-input:eq(7) input").val().length<11){
				window.wxc.xcConfirm('请输入正确的手机号码',window.wxc.xcConfirm.typeEnum.confirm);
			}else if( $(".p-input:eq(8) input").val() == ''){
				window.wxc.xcConfirm('请输入邮箱',window.wxc.xcConfirm.typeEnum.confirm);
			}else{
				saveOrder();
			};

			
		});
	};
	
	
function bwtDate(){
	var bdate = $("#begin_date").val();
	var edate = $("#end_date").val();
	if(bdate >= edate){
		return true;
	}else{
		return false;
	}
}
	
function substractDate(date1, date2){
	    var type1 = typeof date1;
	    var type2 = typeof date2;
	    if (type1 == 'string')
	    {
	        date1 = new Date(date1);
	    }
	    if (type2 == 'string')
	    {
	        date2 = new Date(date2);
	    }
	    //return (date1 - date2) / 1000;
	    if(date1 >= date2){
	    	return true;
	    }else{
	    	return false;
	    }
	}
Palert();
</script>
<script>
function savemail(){
    var email = $('#link_mail').val();
    var mailCode = $('#mailCode').val();
    
    $.ajax({
		url: '/DZBang_entrance/userinfo/editUserinfoEmail.do',
		type: 'post',
    	data: {email:email,mailCode:mailCode},
    	dataType: 'json',
		cache: false,
		'success': function(data){
			if("success" == data.result){
				window.wxc.xcConfirm("绑定成功",window.wxc.xcConfirm.typeEnum.success);
				$(".p2-changeEmail").slideUp();
			}else if("errorcode" == data.result){
				window.wxc.xcConfirm("验证码错误",window.wxc.xcConfirm.typeEnum.error);
			}else{
				window.wxc.xcConfirm("绑定失败",window.wxc.xcConfirm.typeEnum.error);
			}
		},
		'error':function(data){
			window.wxc.xcConfirm("绑定失败",window.wxc.xcConfirm.typeEnum.error);
		}

	});
}

function savephone(){
    var phone = $('#link_phone').val();
    var smsCode = $('#smsCode').val();
    
    $.ajax({
		url: '/DZBang_entrance/userinfo/editUserinfoPhone.do',
		type: 'post',
    	data: {phone:phone,smsCode:smsCode},
    	dataType: 'json',
		cache: false,
		'success': function(data){
			if("success" == data.result){
				window.wxc.xcConfirm("绑定成功",window.wxc.xcConfirm.typeEnum.success);
				$(".p2-changePhone").slideUp();
			}else if("errorcode" == data.result){
				window.wxc.xcConfirm("验证码错误",window.wxc.xcConfirm.typeEnum.error);
			}else{
				window.wxc.xcConfirm("绑定失败",window.wxc.xcConfirm.typeEnum.error);
			}
		},
		'error':function(data){
			window.wxc.xcConfirm("绑定失败",window.wxc.xcConfirm.typeEnum.error);
		}
	});
}

//短信验证码
	function phoneSMS(){
		var phone = $("#link_phone").val();
		if(phone == ''){
			window.wxc.xcConfirm("手机号码不能为空",window.wxc.xcConfirm.typeEnum.error);
			return;
		}else{
			$.ajax({
				url: '/DZBang_entrance/smsCode/phoneSMSCode.do',
				type: 'post',
		    	data: {phone:phone,tm:new Date().getTime()},
		    	dataType: 'json',
				cache: false,
				'success': function(data){
					if(data.result == "success"){
						window.wxc.xcConfirm("短信发送成功",window.wxc.xcConfirm.typeEnum.success);
					}else if(data.result == "error"){
						window.wxc.xcConfirm("短信发送失败",window.wxc.xcConfirm.typeEnum.error);
					}else{
						window.wxc.xcConfirm("短信发送异常",window.wxc.xcConfirm.typeEnum.error);
					}
				},
				'error':function(data){
					window.wxc.xcConfirm("短信发送失效",window.wxc.xcConfirm.typeEnum.error);
				}
			});
		}
	}
	
	//邮箱验证码
	function emailSMS(){
		
	}
</script>
<script>

 function sysloginout(){
	  window.wxc.xcConfirm("请确认是否注销？",window.wxc.xcConfirm.typeEnum.confirm,
	            {onOk: function(){
	            	$.ajax({
	          	      url: '/DZBang_entrance/syslogout.do',
	          	      type: 'post',
	          	        dataType: 'json',
	          	      cache: false,
	          	      'success': function(data){
			            	window.wxc.xcConfirm("注销成功",window.wxc.xcConfirm.typeEnum.success,
			                        {onClose: function(){
			                          window.location.href= "login.html?flag="+Math.random();
			                        }},
			                        {onOk: function(){
			                          window.location.href= "login.html?flag="+Math.random();
			                        }}); 
	          	      },
	          	      'error':function(data){
	          	        window.wxc.xcConfirm("注销失败",window.wxc.xcConfirm.typeEnum.error);
	          	      }
	          	    });
	            	
	            }});
	}
  
  function showChooseStatue(){
		
		var text = '接下来你想：</br><input type="radio" name="statue" value="1" checked="checked" class="statue" checked="checked" />发需求 <input type="radio"  name="statue" value="2" class="statue"/>接需求';
		var txt=  text;
		var option = {
			title: "提醒",
			btn: parseInt("0011",2),
			onOk: function(){
				var statue = $('input[name="statue"]:checked ').val();
				updateUserStatus(statue);
			}
		}
		window.wxc.xcConfirm(txt, "custom", option);
	};
	
	function updateUserStatus(statue){
		$.ajax({
			url: '/DZBang_entrance/happuser/updateUserStatus.do',
			type: 'post',
	    	data: {statue:statue,tm:new Date().getTime()},
	    	dataType: 'json',
			cache: false,
			'success': function(data){
				if(data.result == "success"){
					window.location.href="index.html?flag="+Math.random();
				}else if(data.result == "error"){
					window.wxc.xcConfirm("选择类型错误",window.wxc.xcConfirm.typeEnum.error);
				}else{
					window.wxc.xcConfirm("选择类型错误",window.wxc.xcConfirm.typeEnum.error);
				}
			},
			'error':function(data){
				window.wxc.xcConfirm("选择类型错误",window.wxc.xcConfirm.typeEnum.error);
			}
		});
	}
</script>
</body>
</html>